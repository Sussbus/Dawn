<html>
    <head>
    <script>require('./main.js')</script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>    
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <style>
    body {
        font-family: "Arial", Times, serif;
        background-color: white !important;
    }
    </style>
    </head>
    <body>
        <div id="render-target" />
        <button id="add-command" onclick="showMainWindow()">+</button>

        <script>
            const ipc = require('electron').ipcRenderer;
            const { exec } = require('child_process');
            let RENDER_TARGET = document.getElementById('render-target');
            
            function promisify(func) {
                return function promiseFunc(options) {
                    return new Promise(function executor(resolve, reject) {
                        func(options, function cb(err, val) {
                            if (err) {
                                return reject(err);
                            } else {
                                return resolve(val);
                            }
                        });
                    });
                }
            }
            

            showMainWindow = () => {
                ipc.send('show-main-window');
            }

            handleOnCommandClick = (command) => {
                exec(command, (err, stdout, stderr) => {
                    if (err) {
                        console.log(err)
                        return;
                    }
                    console.log(`stdout: ${stdout}`);
                    console.log(`stderr: ${stderr}`);
                });

            }

            $.getJSON("./js/commands.json", (data) => {
                data.commands.map((command) => {
                    RENDER_TARGET.innerHTML += ''+ 
                    `<div id="command-list-item" onClick="handleOnCommandClick(\'${command.items.join(' && ')}\')">` +
                        `<p id="command-name"> ${command.name} </p>` +
                        `<p id="command-items"> ${command.items.join(' && ')} </p>` + 
                    '</div>';
                })
            }).error((err) => console.log(err));
        </script>
    </body>
</html>
        